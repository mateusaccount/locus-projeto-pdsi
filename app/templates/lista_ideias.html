{% extends 'base.html' %}

{% block title %}P√°gina Inicial - Locus{% endblock %}

{% block extra_css %}
<style>
    .destaques { background-color: #e7f3ff; border: 1px solid #b3d7ff; border-radius: 5px; padding: 1em; margin-bottom: 2em; }
    .destaques h2 { margin-top: 0; color: #004085; }
    .destaque-ideia { display: flex; justify-content: space-between; align-items: center; padding: 0.5em 0; border-bottom: 1px solid #b3d7ff; }
    .destaque-ideia:last-child { border-bottom: none; }
    .destaque-score { font-weight: bold; font-size: 1.2em; color: #004085; }
    .filtros { margin-bottom: 1.5em; padding: 1em; background-color: #fff; border-radius: 5px; }
    .filtros a { display: inline-block; padding: 6px 12px; margin: 0 5px 5px 0; border: 1px solid #ccc; border-radius: 15px; background-color: #f0f0f0; font-size: 0.9em; }
    .filtros a.ativo, .filtros a:hover { background-color: #0056b3; color: white; border-color: #0056b3; }
</style>
{% endblock %}

{% block content %}
<div class="destaques">
    <h2>üèÜ Ideias em Destaque</h2>
    {% for ideia in ideias_destaque %}<div class="destaque-ideia"><div><a href="{% url 'app:detalhe_ideia' ideia.id %}">{{ ideia.titulo }}</a><div class="ideia-meta" style="font-size: 0.9em; color: #555;">por {{ ideia.autor.username }}</div></div><div class="destaque-score">{{ ideia.pontuacao }} Pontos</div></div>{% empty %}<p>Ainda n√£o h√° ideias com votos para destacar.</p>{% endfor %}
</div>

{% if user.is_authenticated %}<p><a href="{% url 'app:submeter_ideia' %}" style="font-weight: bold;">+ Submeter Nova Ideia</a></p>{% endif %}

<div class="filtros">
    <strong>Filtrar por √°rea:</strong><br>
    <a href="{% url 'app:lista_ideias' %}" class="{% if not area_selecionada %}ativo{% endif %}">Mostrar Todas</a>
    {% for value, display in areas %}<a href="?area={{ value }}" class="{% if area_selecionada == value %}ativo{% endif %}">{{ display }}</a>{% endfor %}
</div>

<h3>Todas as Ideias</h3>
{% for ideia in ideias %}<div class="ideia"><h2><a href="{% url 'app:detalhe_ideia' ideia.id %}">{{ ideia.titulo }}</a></h2><p class="ideia-meta" style="font-size: 0.9em; color: #555;"><strong>Autor:</strong> {{ ideia.autor.username }} | <strong>Data:</strong> {{ ideia.data_criacao|date:"d/m/Y" }}{% if ideia.problema_alvo %}<br><strong>Problema:</strong> <a href="{% url 'app:detalhe_problema' ideia.problema_alvo.id %}">{{ ideia.problema_alvo.titulo }}</a>{% endif %}</p><p>{{ ideia.descricao|truncatewords:30 }}</p></div>{% empty %}<p>Nenhuma ideia encontrada para o filtro selecionado.</p>{% endfor %}
{% endblock %}