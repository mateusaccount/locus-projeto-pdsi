{% load static %}
<!DOCTYPE html>
<html lang="pt-br" class="h-full bg-gray-50">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro - Locus</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .bg-locus-gradient { background: linear-gradient(135deg, #2F7E32 0%, #1a5220 100%); }
        .helptext ul { list-style-type: disc; padding-left: 20px; color: #6b7280; margin-top: 4px; }
        .helptext li { font-size: 0.75rem; margin-bottom: 2px; }
    </style>
</head>
<body class="h-full flex items-center justify-center p-4 py-8">

    <div class="w-full max-w-4xl bg-white rounded-3xl shadow-xl overflow-hidden flex flex-col md:flex-row min-h-[550px]">
        
        <div class="hidden md:flex md:w-5/12 bg-locus-gradient flex-col justify-center items-center text-white p-10 text-center relative">
            <div class="absolute inset-0 opacity-10 bg-[url('{% static 'images/tree_background.png' %}')] bg-cover bg-center"></div>
            <div class="relative z-10">
                <img src="{% static 'images/logo.png' %}" alt="Locus" class="h-16 mx-auto mb-6 brightness-0 invert opacity-90">
                <h2 class="text-2xl font-bold mb-3">Bem-vindo</h2>
                <p class="text-green-50 mb-8 text-sm leading-relaxed">
                    Crie sua conta e ajude a transformar o IFRN.
                </p>
                <p class="text-xs text-green-200 uppercase font-bold mb-3">Já possui conta?</p>
                <a href="{% url 'app:login' %}" class="inline-block px-8 py-2.5 border border-white text-white font-semibold rounded-full hover:bg-white hover:text-[#2F7E32] transition-all">
                    Fazer Login
                </a>
            </div>
        </div>

        <div class="w-full md:w-7/12 p-8 md:p-12 bg-white flex flex-col justify-center">
            
            <div class="max-w-sm mx-auto w-full">
                <h1 class="text-2xl font-bold text-gray-900 mb-6">Criar Conta</h1>

                <form method="post" class="space-y-4">
                    {% csrf_token %}

                    {% if form.errors %}
                        <div class="bg-red-50 text-red-600 p-4 rounded-lg text-sm border border-red-100 mb-4">
                            <p class="font-bold mb-1">Ops! Corrija os erros abaixo:</p>
                            <ul class="list-disc pl-5">
                                {% for field in form %}
                                    {% for error in field.errors %}
                                        <li><strong>{{ field.label }}:</strong> {{ error }}</li>
                                    {% endfor %}
                                {% endfor %}
                                {% for error in form.non_field_errors %}
                                    <li>{{ error }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                    {% endif %}

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-1">Usuário</label>
                        {{ form.username }}
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-1">Nome Completo</label>
                        {{ form.first_name }}
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-1">E-mail</label>
                        {{ form.email }}
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-1">Senha</label>
                        {{ form.password1 }} 
                        
                        {% if form.password1.help_text %}
                        <details class="mt-2 group">
                            <summary class="text-xs text-[#2F7E32] font-semibold cursor-pointer hover:underline list-none flex items-center gap-1 select-none">
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                Ver requisitos de segurança
                            </summary>
                            <div class="text-xs text-gray-500 mt-1 p-2 bg-gray-50 rounded border border-gray-100 helptext transition-all">
                                {{ form.password1.help_text|safe }}
                            </div>
                        </details>
                        {% endif %}
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-1">Confirmar Senha</label>
                        {{ form.password2 }}
                    </div>

                    <button type="submit" class="w-full py-3 px-4 mt-6 bg-[#2F7E32] text-white font-bold rounded-lg hover:bg-[#266e29] transition-all shadow-md hover:shadow-lg transform hover:-translate-y-0.5">
                        CRIAR CONTA
                    </button>
                </form>

                <p class="mt-6 text-center text-sm text-gray-600 md:hidden">
                    Já tem conta?
                    <a href="{% url 'app:login' %}" class="font-bold text-[#2F7E32]">Entrar</a>
                </p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Estiliza os inputs automaticamente
            const inputs = document.querySelectorAll('input');
            inputs.forEach(input => {
                input.classList.add(
                    'w-full', 'px-4', 'py-2.5', 
                    'bg-gray-50', 'border', 'border-gray-300', 'rounded-lg', 
                    'text-gray-900', 'text-sm',
                    'focus:ring-2', 'focus:ring-[#2F7E32]', 'focus:border-transparent', 'focus:bg-white',
                    'transition-all', 'outline-none'
                );
            });
        });
    </script>
</body>
</html>